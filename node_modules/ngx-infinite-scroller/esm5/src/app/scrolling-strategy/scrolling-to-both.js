/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { tap, filter } from 'rxjs/operators';
import { StrategyBase } from './strategy-base';
import { InitialScrollPosition } from '../enum/initial-scroll-position-type.enum';
var ScrollingToBoth = /** @class */ (function (_super) {
    tslib_1.__extends(ScrollingToBoth, _super);
    function ScrollingToBoth(directive, state) {
        return _super.call(this, directive, state) || this;
    }
    /**
     * @param {?} scrollPairChanged
     * @return {?}
     */
    ScrollingToBoth.prototype.scrollDirectionChanged = /**
     * @param {?} scrollPairChanged
     * @return {?}
     */
    function (scrollPairChanged) {
        return scrollPairChanged;
    };
    /**
     * @param {?} scrollDirectionChanged
     * @return {?}
     */
    ScrollingToBoth.prototype.scrollRequestZoneChanged = /**
     * @param {?} scrollDirectionChanged
     * @return {?}
     */
    function (scrollDirectionChanged) {
        var _this = this;
        return scrollDirectionChanged.pipe(filter(function (scrollPositions) {
            return (_super.prototype.isScrollUpEnough.call(_this, scrollPositions[1], _this.directive.scrollUpPercentilePositionTrigger) || _super.prototype.isScrollDownEnough.call(_this, scrollPositions[1], _this.directive.scrollDownPercentilePositionTrigger));
        }), tap(function (scrollPositions) {
            _this.scrolledUp = _super.prototype.wasScrolledUp.call(_this, scrollPositions[0], scrollPositions[1]);
        }));
    };
    /**
     * @return {?}
     */
    ScrollingToBoth.prototype.askForUpdate = /**
     * @return {?}
     */
    function () {
        if (this.scrolledUp) {
            this.directive.onScrollUp.next();
        }
        else {
            this.directive.onScrollDown.next();
        }
    };
    /**
     * @return {?}
     */
    ScrollingToBoth.prototype.setInitialScrollPosition = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var initialScrollPositionValue = _super.prototype.getInitialScrollPositionValue.call(this, InitialScrollPosition.MIDDLE);
        this.directive.scrollTo(initialScrollPositionValue);
    };
    /**
     * @return {?}
     */
    ScrollingToBoth.prototype.setPreviousScrollPosition = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var prevScrollPosition;
        if (this.scrolledUp) {
            prevScrollPosition = this.state.previousScrollTop +
                (this.state.scrollHeight - this.state.previousScrollHeight);
        }
        else {
            prevScrollPosition = this.state.previousScrollTop;
        }
        this.directive.scrollTo(prevScrollPosition);
    };
    return ScrollingToBoth;
}(StrategyBase));
export { ScrollingToBoth };
if (false) {
    /**
     * @type {?}
     * @private
     */
    ScrollingToBoth.prototype.scrolledUp;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2Nyb2xsaW5nLXRvLWJvdGguanMiLCJzb3VyY2VSb290Ijoibmc6Ly9uZ3gtaW5maW5pdGUtc2Nyb2xsZXIvIiwic291cmNlcyI6WyJzcmMvYXBwL3Njcm9sbGluZy1zdHJhdGVneS9zY3JvbGxpbmctdG8tYm90aC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUNBLE9BQU8sRUFBRSxHQUFHLEVBQUUsTUFBTSxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFFN0MsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBTy9DLE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxNQUFNLDJDQUEyQyxDQUFDO0FBRWxGO0lBQXFDLDJDQUFZO0lBSS9DLHlCQUNFLFNBQXVDLEVBQ3ZDLEtBQTRCO2VBRTVCLGtCQUFNLFNBQVMsRUFBRSxLQUFLLENBQUM7SUFDekIsQ0FBQzs7Ozs7SUFFTSxnREFBc0I7Ozs7SUFBN0IsVUFBOEIsaUJBQStDO1FBRTNFLE9BQU8saUJBQWlCLENBQUM7SUFDM0IsQ0FBQzs7Ozs7SUFFTSxrREFBd0I7Ozs7SUFBL0IsVUFBZ0Msc0JBQW9EO1FBQXBGLGlCQWtCQztRQWhCQyxPQUFPLHNCQUFzQixDQUFDLElBQUksQ0FDaEMsTUFBTSxDQUFDLFVBQUMsZUFBaUM7WUFDdkMsT0FBTyxDQUFDLGlCQUFNLGdCQUFnQixhQUM1QixlQUFlLENBQUMsQ0FBQyxDQUFDLEVBQ2xCLEtBQUksQ0FBQyxTQUFTLENBQUMsaUNBQWlDLENBQ2pELElBQUksaUJBQU0sa0JBQWtCLGFBQzNCLGVBQWUsQ0FBQyxDQUFDLENBQUMsRUFDbEIsS0FBSSxDQUFDLFNBQVMsQ0FBQyxtQ0FBbUMsQ0FDbkQsQ0FBQyxDQUFDO1FBQ0wsQ0FBQyxDQUFDLEVBQ0YsR0FBRyxDQUFDLFVBQUMsZUFBaUM7WUFDcEMsS0FBSSxDQUFDLFVBQVUsR0FBRyxpQkFBTSxhQUFhLGFBQ25DLGVBQWUsQ0FBQyxDQUFDLENBQUMsRUFDbEIsZUFBZSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDeEIsQ0FBQyxDQUFDLENBQ0gsQ0FBQztJQUNKLENBQUM7Ozs7SUFFTSxzQ0FBWTs7O0lBQW5CO1FBQ0UsSUFBSSxJQUFJLENBQUMsVUFBVSxFQUFFO1lBQ25CLElBQUksQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDLElBQUksRUFBRSxDQUFDO1NBQ2xDO2FBQU07WUFDTCxJQUFJLENBQUMsU0FBUyxDQUFDLFlBQVksQ0FBQyxJQUFJLEVBQUUsQ0FBQztTQUNwQztJQUNILENBQUM7Ozs7SUFFTSxrREFBd0I7OztJQUEvQjs7WUFDUSwwQkFBMEIsR0FBRyxpQkFBTSw2QkFBNkIsWUFDcEUscUJBQXFCLENBQUMsTUFBTSxDQUM3QjtRQUVELElBQUksQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLDBCQUEwQixDQUFDLENBQUM7SUFDdEQsQ0FBQzs7OztJQUVNLG1EQUF5Qjs7O0lBQWhDOztZQUNNLGtCQUFrQjtRQUV0QixJQUFJLElBQUksQ0FBQyxVQUFVLEVBQUU7WUFDbkIsa0JBQWtCLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxpQkFBaUI7Z0JBQy9DLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDO1NBQy9EO2FBQU07WUFDTCxrQkFBa0IsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLGlCQUFpQixDQUFDO1NBQ25EO1FBRUQsSUFBSSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsa0JBQWtCLENBQUMsQ0FBQztJQUM5QyxDQUFDO0lBQ0gsc0JBQUM7QUFBRCxDQUFDLEFBaEVELENBQXFDLFlBQVksR0FnRWhEOzs7Ozs7O0lBOURDLHFDQUE0QiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IHRhcCwgZmlsdGVyIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuXG5pbXBvcnQgeyBTdHJhdGVneUJhc2UgfSBmcm9tICcuL3N0cmF0ZWd5LWJhc2UnO1xuXG5pbXBvcnQgeyBOZ3hJbmZpbml0ZVNjcm9sbGVyRGlyZWN0aXZlIH0gZnJvbSAnLi4vbmd4LWluZmluaXRlLXNjcm9sbGVyLmRpcmVjdGl2ZSc7XG5pbXBvcnQgeyBEaXJlY3RpdmVTdGF0ZVNlcnZpY2UgfSBmcm9tICcuLi9kaXJlY3RpdmUtc3RhdGUuc2VydmljZSc7XG5cbmltcG9ydCB7IFNjcm9sbGluZ1N0cmF0ZWd5IH0gZnJvbSAnLi4vbW9kZWwvc2Nyb2xsaW5nLXN0cmF0ZWd5Lm1vZGVsJztcbmltcG9ydCB7IFNjcm9sbFBvc2l0aW9uIH0gZnJvbSAnLi4vbW9kZWwvc2Nyb2xsLXBvc2l0aW9uLm1vZGVsJztcbmltcG9ydCB7IEluaXRpYWxTY3JvbGxQb3NpdGlvbiB9IGZyb20gJy4uL2VudW0vaW5pdGlhbC1zY3JvbGwtcG9zaXRpb24tdHlwZS5lbnVtJztcblxuZXhwb3J0IGNsYXNzIFNjcm9sbGluZ1RvQm90aCBleHRlbmRzIFN0cmF0ZWd5QmFzZSBpbXBsZW1lbnRzIFNjcm9sbGluZ1N0cmF0ZWd5IHtcblxuICBwcml2YXRlIHNjcm9sbGVkVXA6IGJvb2xlYW47XG5cbiAgY29uc3RydWN0b3IoXG4gICAgZGlyZWN0aXZlOiBOZ3hJbmZpbml0ZVNjcm9sbGVyRGlyZWN0aXZlLFxuICAgIHN0YXRlOiBEaXJlY3RpdmVTdGF0ZVNlcnZpY2VcbiAgKSB7XG4gICAgc3VwZXIoZGlyZWN0aXZlLCBzdGF0ZSk7XG4gIH1cblxuICBwdWJsaWMgc2Nyb2xsRGlyZWN0aW9uQ2hhbmdlZChzY3JvbGxQYWlyQ2hhbmdlZDogT2JzZXJ2YWJsZTxTY3JvbGxQb3NpdGlvbltdPik6XG4gICAgT2JzZXJ2YWJsZTxTY3JvbGxQb3NpdGlvbltdPiB7XG4gICAgcmV0dXJuIHNjcm9sbFBhaXJDaGFuZ2VkO1xuICB9XG5cbiAgcHVibGljIHNjcm9sbFJlcXVlc3Rab25lQ2hhbmdlZChzY3JvbGxEaXJlY3Rpb25DaGFuZ2VkOiBPYnNlcnZhYmxlPFNjcm9sbFBvc2l0aW9uW10+KTpcbiAgICBPYnNlcnZhYmxlPFNjcm9sbFBvc2l0aW9uW10+IHtcbiAgICByZXR1cm4gc2Nyb2xsRGlyZWN0aW9uQ2hhbmdlZC5waXBlKFxuICAgICAgZmlsdGVyKChzY3JvbGxQb3NpdGlvbnM6IFNjcm9sbFBvc2l0aW9uW10pID0+IHtcbiAgICAgICAgcmV0dXJuIChzdXBlci5pc1Njcm9sbFVwRW5vdWdoKFxuICAgICAgICAgIHNjcm9sbFBvc2l0aW9uc1sxXSxcbiAgICAgICAgICB0aGlzLmRpcmVjdGl2ZS5zY3JvbGxVcFBlcmNlbnRpbGVQb3NpdGlvblRyaWdnZXJcbiAgICAgICAgKSB8fCBzdXBlci5pc1Njcm9sbERvd25Fbm91Z2goXG4gICAgICAgICAgc2Nyb2xsUG9zaXRpb25zWzFdLFxuICAgICAgICAgIHRoaXMuZGlyZWN0aXZlLnNjcm9sbERvd25QZXJjZW50aWxlUG9zaXRpb25UcmlnZ2VyXG4gICAgICAgICkpO1xuICAgICAgfSksXG4gICAgICB0YXAoKHNjcm9sbFBvc2l0aW9uczogU2Nyb2xsUG9zaXRpb25bXSkgPT4ge1xuICAgICAgICB0aGlzLnNjcm9sbGVkVXAgPSBzdXBlci53YXNTY3JvbGxlZFVwKFxuICAgICAgICAgIHNjcm9sbFBvc2l0aW9uc1swXSxcbiAgICAgICAgICBzY3JvbGxQb3NpdGlvbnNbMV0pO1xuICAgICAgfSlcbiAgICApO1xuICB9XG5cbiAgcHVibGljIGFza0ZvclVwZGF0ZSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5zY3JvbGxlZFVwKSB7XG4gICAgICB0aGlzLmRpcmVjdGl2ZS5vblNjcm9sbFVwLm5leHQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5kaXJlY3RpdmUub25TY3JvbGxEb3duLm5leHQoKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgc2V0SW5pdGlhbFNjcm9sbFBvc2l0aW9uKCk6IHZvaWQge1xuICAgIGNvbnN0IGluaXRpYWxTY3JvbGxQb3NpdGlvblZhbHVlID0gc3VwZXIuZ2V0SW5pdGlhbFNjcm9sbFBvc2l0aW9uVmFsdWUoXG4gICAgICBJbml0aWFsU2Nyb2xsUG9zaXRpb24uTUlERExFLFxuICAgICk7XG5cbiAgICB0aGlzLmRpcmVjdGl2ZS5zY3JvbGxUbyhpbml0aWFsU2Nyb2xsUG9zaXRpb25WYWx1ZSk7XG4gIH1cblxuICBwdWJsaWMgc2V0UHJldmlvdXNTY3JvbGxQb3NpdGlvbigpOiB2b2lkIHtcbiAgICBsZXQgcHJldlNjcm9sbFBvc2l0aW9uO1xuXG4gICAgaWYgKHRoaXMuc2Nyb2xsZWRVcCkge1xuICAgICAgcHJldlNjcm9sbFBvc2l0aW9uID0gdGhpcy5zdGF0ZS5wcmV2aW91c1Njcm9sbFRvcCArXG4gICAgICAgICh0aGlzLnN0YXRlLnNjcm9sbEhlaWdodCAtIHRoaXMuc3RhdGUucHJldmlvdXNTY3JvbGxIZWlnaHQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBwcmV2U2Nyb2xsUG9zaXRpb24gPSB0aGlzLnN0YXRlLnByZXZpb3VzU2Nyb2xsVG9wO1xuICAgIH1cblxuICAgIHRoaXMuZGlyZWN0aXZlLnNjcm9sbFRvKHByZXZTY3JvbGxQb3NpdGlvbik7XG4gIH1cbn1cbiJdfQ==